@{
    ViewBag.Title = "Test";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Test</h2>

@using MvcBootstrapManage.Models
@model List<Module>


    <style type="text/css">
	    @*table{border-collapse:collapse;width:100%;}
	    table th,table td{padding:5px 10px;border:2px #fff solid;text-align:center;}
	    table thead{background-color:#abd3a5;color:#fff;}
	    table tbody tr.odd{background-color:#ecf9de;}
	    table tbody tr.even{background-color:#e1f1d8;}
	    table tbody td.sorted{background-color:#f8f6d0;}
	    table thead tr th{cursor:pointer;line-height:12px;}
	    table thead tr th.sorted-desc{background:#abd3a5 url("images/icon.gif") no-repeat 98% 7px;}
	    table thead tr th.sorted-asc{background:#abd3a5 url("images/icon.gif") no-repeat 98% -13px;}
	    table thead tr th.hover{text-decoration:underline;}*@
	    .page{padding:10px 0;border-bottom:1px dashed #abd3a5;margin-bottom:10px;font-size:12px;}
	    .page .page-number{padding:1px 5px;margin-right:5px;cursor:pointer;}
	    .page .active{background-color:#abd3a5;color:#fff;}
    </style>

<table class="table table-striped table-bordered table-hover sortable">
	<thead>
		<tr>
			<th></th>
			<th class="sort-alpha">Title</th>
			<th class="sort-alpha">Author(s)</th>
			<th class="sort-data">Publish&nbsp;Date</th>
			<th class="sort-numeric">Price</th>
		</tr>
	</thead>
	<tbody>
        @foreach (var item in Model)
        {
		    <tr>
			    <td>@item.Name</td>
			    <td>@item.Code</td>
			    <td>@item.Url</td>
			    <td>@item.IsVisible</td>
			    <td>@item.CreateDate</td>
		    </tr>
        }
	</tbody>
</table>
@section script{
<script src="../../Scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
    jQuery.fn.alternateRowColors = function () {
        $("tbody tr:odd", this).removeClass("even").addClass("odd");
        $("tbody tr:even", this).removeClass("odd").addClass("even");
        return this;
    }

    $(document).ready(function () {
        $("table.sortable").each(function () {
            var $table = $(this);
            $table.alternateRowColors();
            $("th", $table).each(function (column) {
                var findSortKey;
                if ($(this).is(".sort-alpha")) {
                    findSortKey = function ($cell) {
                        return $cell.find(".sort-key").text().toUpperCase() + " " + $cell.text().toUpperCase();
                    };
                }
                else if ($(this).is(".sort-numeric")) {
                    findSortKey = function ($cell) {
                        var key = parseFloat($cell.text().replace(/^[^\d.]*/, " "));
                        return isNaN(key) ? 0 : key;
                    };
                }
                else if ($(this).is(".sort-data")) {
                    findSortKey = function ($cell) {
                        return Date.parse('1 ' + $cell.text());
                    };
                }

                if (findSortKey) {
                    $(this).hover(
						function () {
						    $(this).addClass("hover");
						},
						function () {
						    $(this).removeClass("hover");
						}).click(function () {
						    var newDirection = 1;
						    if ($(this).is(".sorted-asc")) {
						        newDirection = -1;
						    }
						    var rows = $table.find("tbody > tr").get();
						    $.each(rows, function (index, row) {
						        row.sortKey = findSortKey($(row).children("td").eq(column));
						    });
						    rows.sort(function (a, b) {
						        if (a.sortKey < b.sortKey) return -newDirection;
						        if (a.sortKey > b.sortKey) return newDirection;
						        return 0;
						    });
						    $.each(rows, function (index, row) {
						        $table.children("tbody").append(row);
						        row.sortKey = null;
						    });
						    $table.find("th").removeClass("sorted-asc").removeClass("sorted-desc");
						    var $sortHead = $table.find('th').filter(":nth-child(" + (column + 1) + ")");
						    if (newDirection == 1) {
						        $sortHead.addClass("sorted-asc");
						    }
						    else {
						        $sortHead.addClass("sorted-desc");
						    }
						    $table.find('td').removeClass("sorted").filter(":nth-child(" + (column + 1) + ")").addClass("sorted");
						    $table.alternateRowColors();
						    $table.trigger("repaginate");
						});
                };
            });
            var currentPage = 0;
            var numperpage = 3;
            var $table = $(this);
            $table.bind("repaginate", function () {
                $table.find("tbody tr").show();
                $("tbody tr:lt(" + currentPage * numperpage + ")").hide().end();
                $("tbody tr:gt(" + ((currentPage + 1) * numperpage - 1) + ")").hide().end();
            });
            var numRows = $table.find("tbody tr").length;
            var numPages = Math.ceil(numRows / numperpage);
            var $pager = $('<div class="page"></div>');
            for (var page = 0; page < numPages; page++) {
                $('<span class="page-number">' + (page + 1) + '</span>').bind("click", { "newPage": page }, function (event) {
                    currentPage = event.data["newPage"];
                    alert(currentPage);
                    $table.trigger("repaginate");
                    $(this).addClass("active").siblings().removeClass("active");
                }).appendTo($pager);
            }

            /************************************************/

            var mypage = 0;
            $('<span class="page-number">' + '首页' + '</span>').bind("click", function (event) {
                currentPage = mypage = 0;
                $table.trigger("repaginate");
                $(this).addClass("active").siblings().removeClass("active");
            }).appendTo($pager);
            $('<span class="page-number">' + '上一页' + '</span>').bind("click", function (event) {
                if (mypage >= 1) {
                    currentPage = --mypage;
                    $table.trigger("repaginate");
                    $(this).addClass("active").siblings().removeClass("active");
                }
            }).appendTo($pager);
            $('<span class="page-number">' + '下一页' + '</span>').bind("click", function (event) {
                if (mypage < numPages - 1) {
                    currentPage = ++mypage;
                    $table.trigger("repaginate");
                    $(this).addClass("active").siblings().removeClass("active");
                }
            }).appendTo($pager);
            $('<span class="page-number">' + '尾页' + '</span>').bind("click", function (event) {
                currentPage = mypage = numPages - 1;
                $table.trigger("repaginate");
                $(this).addClass("active").siblings().removeClass("active");
            }).appendTo($pager);
            $('<span class="page-number">跳转到</span><input type="text" id="go-page" style="width:20px;height:10px;margin-top:8px;" /><span class="page-number">页</span>').appendTo($pager);
            $('<input type="button" value="GO" />').bind("click", function (event) {
                var goPage = $('#go-page').val().trim();
                if (goPage == '') {
                    alert("请输入");
                    return;
                }
                else {
                    if (isNaN(goPage) || !/^\d+$/.test(goPage)) {
                        alert("输入不符合规范");
                        return;
                    }
                }
                if (goPage < 1) {
                    alert("不得小于1");
                }
                else {
                    currentPage = mypage = goPage - 1;
                    if (mypage <= numPages) {
                        $table.trigger("repaginate");
                        $(this).addClass("active").siblings().removeClass("active");
                    }
                    else {
                        alert("超出最大页数");
                    }
                }
            }).appendTo($pager);

            $('<span class="page-number">当前第' + (++currentPage) + '页</span>').appendTo($pager);
            $('<span class="page-number">共' + numPages + '页</span>').appendTo($pager);
            $('<span class="page-number">每页' + numperpage + '条数据</span>').appendTo($pager);
            $('<span class="page-number">共' + numPages * numperpage + '条数据</span>').appendTo($pager);

            $pager.find("span.page-number:first").addClass("active");
            $pager.insertBefore($table);
            $table.trigger("repaginate");
        });
    });	
</script>

}